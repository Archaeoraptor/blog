---
title: 写一个简单的DNS服务器
tags:
- dns
- go
date: 2021-09-14 10:0:0
abbrlink: 'write-a-dns-server-in-go'
---
要在某个开发板上整个DNS服务器之类的东西，看了一圈还是不用c了，继续摆烂用go整一个吧。之前用tinygo在写东西，体验比写c好太多了。好在go的网络库相当强，之前几百行做一个简陋版的代理、静态资源服务器足够了，做一个DNS服务器也不难，大部分网络编程的问题可以直接调库，比c开心太多了。而且大部分时候不用头疼交叉编译的问题。

<!-- more -->

## 把go写的东西移植到嵌入式板子上

先跑个题，说一下go在板子上的情况。要看DNS相关内容请直接跳到后面。

嵌入式基本上还是C的天下，对功耗和成本一贯很抠门。有的时候Rust都嫌打包出来的binary体积大，迷之抠门。更不用提提go这样有gc的语言了。不过如果你对实时性没有很高的要求，也不怎么在乎成本，挥霍一下整个操作系统而不是用裸版、用go写点应用之类的，都会让你的幸福感飙升。

在摩尔定律依然没有完全失效的今天，多花一点钱整一些好点的芯片，在MCU上挥霍一下用上MMU和malloc，甚至跑上一个操作系统、用上有gc的语言。

## 简陋版本




## 推荐一下CoreDNS等成熟的项目

CoreDNS等库已经很成熟了，没有特殊需求可以直接用这些。
不过这些对一个柔弱的开发板来说还是太重了，总有些杀鸡用牛刀的感觉